webpackJsonp([13],{vFK7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{loading:!1,bannerData:[]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0,this.$store.dispatch("ListBanner").then(function(t){e.bannerData=t,e.loading=!1,e.$message({showClose:!0,message:"列表加载完成",type:"success"})}).catch(function(t){e.loading=!1,e.$message({showClose:!0,message:"列表加载失败请刷新重试",type:"error"})})},handleClick:function(e,t,a){var n=this;t&&t.stopPropagation(),console.log(e);var o=e.gId;this.loading=!0,this.$store.dispatch("GetGoodsById",o).then(function(e){n.$router.push({name:"goodsDetail",params:{param:{type:e.type,tBId:e.tBId,tBName:"",data:e}}})}).catch(function(e){n.loading=!1,n.$message({showClose:!0,message:"获取数据失败",type:"error"})})},handleDeleteClick:function(e,t){var a=this;t&&t.stopPropagation(),this.loading=!0;var n=e.row.id;this.$store.dispatch("DeleteBanner",n).then(function(t){a.loading=!1,a.bannerData.splice(e.$index,1),a.$message({showClose:!0,message:"删除成功",type:"success"})}).catch(function(e){a.loading=!1,a.$message({showClose:!0,message:"删除失败",type:"error"})})},formatterDate:function(e,t,a){return new Date(a).toLocaleString()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{data:e.bannerData,"empty-text":"无"},on:{"row-click":e.handleClick}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gId",label:"商品id"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品广告图"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.src,width:"200px",height:"100px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",formatter:e.formatterDate,label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"modifyTime",formatter:e.formatterDate,label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDeleteClick(t,a)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},s=a("VU/8")(n,o,!1,null,null,null);t.default=s.exports}});